---
title: 秒杀系统设计
date: 2020-07-29 19:49:21
tags: go
categories:
    - project
---

### 需求原型设计

主要设计页面(墨刀原型设计工具)

* 前台用户登录页面，商品展示页面，抢购结果页面 
* 后台订单管理页面 


### 系统架构设计  

* 前端页面需要承载大流量
* 在大并发状态下要解决超卖问题
* 后端接口需要满足横向扩展
![project_seckill](/images/project_seckill_2020073001.png)


### RabbitMQ
* 定义和特征  
RabbitMQ是面向消息的中间件，用于组件之间的解耦，主要体现在消息的发送者和消费者之间无强依赖关系  
RabbitMQ特点，高可用, 扩展性, 多语言客户端，管理界面等 
主要使用场景，流量削峰，异步处理，应用解耦 
* 管理命令介绍　
```
rabbtmq-plugins list  //查看插件
rabbitmq-plugins enable rabbitmq_management  //安装管理界面
rabbitmq-plugins disable rabbitmq_management //卸载管理界面　
rabbitmqctl list_users  //列出已创建的用户
rabbitmqctl set_user_tags　colin administrator　//设置用户和密码
rabbitmqctl set_user_tags　colin administrator　//设置角色
```
* 核心概念
VirtualHost
Connection
Exchange
Channel
Queue
Binding 


*常用工作模式　
1. Simple模式　
![project_seckill02](/images/project_seckill_2020073002.png)  

2. Work, 工作模式
　一个消息只能被一个消费者获取　
![project_seckill_2020073101](/images/project_seckill_2020073101.png)

3. Publish/Subscribe 订阅模式
   消息被路由投递给多个队列，一个消息被多个消费者获取
![project_seckill_2020080201](/images/project_seckill_2020080201.png)

4. Routing, 路由模式　
一个消息被多个消费者获取，并且消息的目标队列可被生产者指定
![project_seckill_2020080202](/images/project_seckill_2020080202.png)


5. Topic模式
用BindingKey 以通配符， (#：一个或多个词，*：一个词)的方式指定
![project_seckill_2020080203](/images/project_seckill_2020080203.png)


6. RPC模式

### 后台功能开发　　
* 商品模型设计开发　　
* 商品增删改查功能开发
* 后台商品管理页面　


