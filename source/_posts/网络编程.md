---
title: 网络编程
date: 2020-08-27 06:10:02
tags: linux 
---

##　Tcp中的异常处理　
当客户段因位置原因崩溃或异常退出后，内核会发给服务端一条rst消息, 此时epoll变为可读，read 到rst报错, 一下情况会收到对端rst消息:
1. connect一个不存在的端口，客户端会收到一条RST，报错Connection refused
2. 程序崩溃或异常退出，会向对端发送
3. 对端断电重启，send数据时会收到来自对端的RST
4. close(sockfd)时，直接丢弃接收缓冲区未读取的数据，并给对方发一个RST。这个是由		        SO_LINGER选项来控制的

有些情况服务端感知不到客户端断开:
1. 客户端断电或者网络异常　
2. 拔掉网线
这个时候服务端可能存在资源泄露的情况, 直至服务端资源耗尽拒绝提供服务, 解决方法加心跳

### Tcp半开连接
https://blog.csdn.net/larry_zeng1/article/details/78437050

引用:
	[断开TCP连接](https://segmentfault.com/a/1190000017411330)
	[TCP 异常关闭研究分析](https://cloud.tencent.com/developer/news/24414)
